import{j as e,r as x,u as D,a as F,H as T,L as g,d as S}from"./app-CluCXHk5.js";import{c as z,X as E,A as L}from"./app-layout-Dptf_n_z.js";import{a as p,c as d,d as I,B as c}from"./app-logo-icon-BHhRvbCP.js";import{D as M,a as H,b as $,g as U,c as q,d as B,e as Y}from"./dialog-BzNzrjpv.js";import{L as A,I as G}from"./label-D6P40_vC.js";import{P as j,C as O,a as R,b as V,d as X}from"./card-BBYUUUj7.js";import"./app-D1OMsZCJ.js";import"./index-B0ziLPav.js";import"./index-SwsuwM1t.js";import"./index-8yeX51zX.js";import"./index-uNZ66-V8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],J=p("ChevronLeft",Z);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Q=p("Ellipsis",K);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],ee=p("File",W);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ae=p("Upload",se);function te({className:s,...t}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:d("mx-auto flex w-full justify-center",s),...t})}function le({className:s,...t}){return e.jsx("ul",{"data-slot":"pagination-content",className:d("flex flex-row items-center gap-1",s),...t})}function m({...s}){return e.jsx("li",{"data-slot":"pagination-item",...s})}function y({className:s,isActive:t,size:o="icon",...a}){return e.jsx("a",{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:d(I({variant:t?"outline":"ghost",size:o}),s),...a})}function ne({className:s,...t}){return e.jsxs(y,{"aria-label":"Go to previous page",size:"default",className:d("gap-1 px-2.5 sm:pl-2.5",s),...t,children:[e.jsx(J,{}),e.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function re({className:s,...t}){return e.jsxs(y,{"aria-label":"Go to next page",size:"default",className:d("gap-1 px-2.5 sm:pr-2.5",s),...t,children:[e.jsx("span",{className:"hidden sm:block",children:"Next"}),e.jsx(z,{})]})}function ie({className:s,...t}){return e.jsxs("span",{"aria-hidden":!0,"data-slot":"pagination-ellipsis",className:d("flex size-9 items-center justify-center",s),...t,children:[e.jsx(Q,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]})}function oe({task:s,trigger:t}){const[o,a]=x.useState(!1),[l,n]=x.useState([]),{data:u,setData:h,post:_,processing:f,errors:N,reset:b}=D({files:[]});if(x.useEffect(()=>{o&&(n([]),b())},[o]),x.useEffect(()=>{h("files",l)},[l]),!s||!s.permissions.can_complete||!s.user_task_id)return null;const w=r=>{const i=Array.from(r.target.files||[]);if(l.length+i.length>s.number_of_uploads){alert(`You can only upload up to ${s.number_of_uploads} file(s).`);return}n(v=>[...v,...i]),r.target.value=""},C=r=>{n(i=>i.filter((v,P)=>P!==r))},k=r=>{if(r.preventDefault(),l.length!==s.number_of_uploads){alert(`You must upload exactly ${s.number_of_uploads} file(s).`);return}_(route("tasks.complete",{userTask:s.user_task_id}),{forceFormData:!0,onSuccess:()=>{a(!1),n([]),b()},onError:i=>{console.log("Upload errors:",i)}})};return e.jsxs(M,{open:o,onOpenChange:a,children:[e.jsx(H,{asChild:!0,children:t||e.jsx(c,{children:"Complete"})}),e.jsxs($,{className:"sm:max-w-[500px]",children:[e.jsxs(U,{children:[e.jsx(q,{children:s.name}),e.jsx(B,{children:s.description})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(A,{htmlFor:"file-upload",children:["Upload Files (",l.length,"/",s.number_of_uploads,")"]}),e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(ae,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]})]}),e.jsx(G,{id:"file-upload",type:"file",multiple:s.number_of_uploads>1,onChange:w,className:"hidden",accept:"image/jpeg,image/png,image/webp"})]}),N.files&&e.jsx("span",{className:"text-red-600 text-sm",children:N.files})]}),l.length>0&&e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:l.map((r,i)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx(ee,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm truncate",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(c,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(i),children:e.jsx(E,{className:"w-4 h-4"})})]},i))}),e.jsxs(Y,{children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:f,children:"Cancel"}),e.jsx(c,{type:"submit",disabled:l.length===0||f,children:f?"Submitting...":"Submit Task"})]})]})]})]})}const ce=[{title:"Tasks",href:route("tasks.index")}];function be(){const{tasks:s}=F().props,t=a=>{a&&S.get(a,{},{preserveScroll:!0,preserveState:!0})},o=()=>{const{meta:a}=s,l=[];return a.links.forEach((n,u)=>{if(!(n.label==="&laquo; Previous"||n.label==="Next &raquo;")){if(n.label==="..."){l.push(e.jsx(m,{children:e.jsx(ie,{})},`ellipsis-${u}`));return}n.url&&l.push(e.jsx(m,{children:e.jsx(y,{href:"#",onClick:h=>{h.preventDefault(),t(n.url)},className:n.active?"bg-primary text-primary-foreground":"",children:n.label})},u))}}),l};return e.jsxs(L,{breadcrumbs:ce,children:[e.jsx(T,{title:"Tasks"}),e.jsx("div",{className:"p-4 flex flex-col gap-6",children:s.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Task Management"}),s.current_user_role==="manager"&&e.jsx(g,{href:route("tasks.create"),children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"})," Create New Task"]})})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.data.map(a=>e.jsxs(O,{className:"shadow-md hover:shadow-lg transition rounded-2xl",children:[e.jsx(R,{children:e.jsxs(V,{className:"flex justify-between items-center",children:[e.jsx("span",{children:a.name}),a.is_active?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Inactive"})]})}),e.jsxs(X,{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs",children:[a.number_of_uploads," Uploads"]}),a.in_progress&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 text-xs",children:"In Progress"})]}),e.jsxs("div",{className:"flex gap-2 mt-2 justify-end",children:[a.permissions.can_start&&!a.in_progress&&e.jsx(g,{href:route("tasks.start",a.id),children:e.jsx(c,{size:"sm",className:"flex-1",children:"Start"})}),a.permissions.can_complete&&e.jsx(oe,{task:a})]})]})]},a.id))}),s.meta.last_page>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(te,{children:e.jsxs(le,{children:[e.jsx(m,{children:e.jsx(ne,{href:"#",onClick:a=>{a.preventDefault(),s.links.prev&&t(s.links.prev)},className:s.links.prev?"cursor-pointer":"pointer-events-none opacity-50"})}),o(),e.jsx(m,{children:e.jsx(re,{href:"#",onClick:a=>{a.preventDefault(),s.links.next&&t(s.links.next)},className:s.links.next?"cursor-pointer":"pointer-events-none opacity-50"})})]})})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(j,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No tasks created yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first task to get started with task management"}),e.jsx(g,{href:route("tasks.create"),children:e.jsxs(c,{className:"inline-flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Create Your First Task"]})})]})})]})}export{be as default};
